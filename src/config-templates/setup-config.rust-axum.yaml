# Claude Code Boilerplate — Rust 2024 + Axum (Full-Featured)
# Run: ./setup.sh --config setup-config.rust-axum.yaml
#
# Rust compiles to a static binary — no native_build flag needed.
# Rust's ownership model and type system enforce memory safety at compile time.
# No DDD flag: Rust uses traits + modules for domain boundaries, not class hierarchies.

# ═══════════════════════════════════════════════════
# SECTION 1: PROJECT IDENTITY
# ═══════════════════════════════════════════════════
project:
  name: "my-rust-service"
  purpose: "Describe your service purpose here"

# ═══════════════════════════════════════════════════
# SECTION 2: ARCHITECTURE
# ═══════════════════════════════════════════════════
architecture:
  style: microservice
  domain_driven: false         # Rust uses traits + modules for domain isolation, not DDD artifacts
  event_driven: true

# ═══════════════════════════════════════════════════
# SECTION 3: INTERFACES
# ═══════════════════════════════════════════════════
interfaces:
  - type: rest
    spec: openapi
  - type: grpc
    spec: proto3
  - type: event-consumer
    broker: kafka
  - type: event-producer
    broker: kafka

# ═══════════════════════════════════════════════════
# SECTION 4: LANGUAGE
# ═══════════════════════════════════════════════════
language:
  name: rust
  version: "2024"

# ═══════════════════════════════════════════════════
# SECTION 5: FRAMEWORK
# ═══════════════════════════════════════════════════
framework:
  name: axum
  version: ""
  build_tool: cargo
  native_build: false          # Rust is natively compiled — flag has no effect

# ═══════════════════════════════════════════════════
# SECTION 6: DATA
# ═══════════════════════════════════════════════════
data:
  database:
    type: postgresql
    version: "17"
    migration: none            # Rust typically uses sqlx migrations or diesel migrations

  cache:
    type: redis
    version: "7.4"

  message_broker:
    type: kafka
    version: "3.7"

# ═══════════════════════════════════════════════════
# SECTION 7: SECURITY
# ═══════════════════════════════════════════════════
security:
  compliance:
    - lgpd
  encryption:
    at_rest: true
    key_management: vault
  pentest_readiness: true

# ═══════════════════════════════════════════════════
# SECTION 8: CLOUD PROVIDER
# ═══════════════════════════════════════════════════
cloud:
  provider: none                  # aws | azure | gcp | oci | none

# ═══════════════════════════════════════════════════
# SECTION 9: INFRASTRUCTURE
# ═══════════════════════════════════════════════════
infrastructure:
  container: docker
  orchestrator: kubernetes
  templating: kustomize            # kustomize | helm | none
  iac: terraform
  registry: none                  # ecr | acr | gar | ghcr | dockerhub | none
  api_gateway: kong
  service_mesh: none              # istio | linkerd | none

# ═══════════════════════════════════════════════════
# SECTION 10: OBSERVABILITY
# ═══════════════════════════════════════════════════
observability:
  standard: opentelemetry
  backend: grafana-stack

# ═══════════════════════════════════════════════════
# SECTION 11: TESTING
# ═══════════════════════════════════════════════════
testing:
  smoke_tests: true
  performance_tests: true
  contract_tests: false        # Contract testing ecosystem in Rust is limited
  chaos_tests: true

# ═══════════════════════════════════════════════════
# SECTION 12: DOMAIN TEMPLATE
# ═══════════════════════════════════════════════════
domain:
  template: none

# ═══════════════════════════════════════════════════
# SECTION 13: CONVENTIONS
# ═══════════════════════════════════════════════════
conventions:
  code_language: en
  commit_language: en
  documentation_language: pt-br
  git_scopes:
    - { scope: "domain", area: "Core domain logic" }
    - { scope: "infra", area: "Infrastructure and adapters" }
    - { scope: "api", area: "REST/gRPC API layer" }
    - { scope: "events", area: "Event producers and consumers" }
    - { scope: "config", area: "Configuration and properties" }

# ═══════════════════════════════════════════════════
# SECTION 14: SKILLS / AGENTS / HOOKS / SETTINGS
# ═══════════════════════════════════════════════════
skills:
  override: auto
agents:
  override: auto
  adaptive_model:
    junior: "haiku"
    mid: "sonnet"
    senior: "opus"
hooks:
  post_compile: true
settings:
  auto_generate: true
