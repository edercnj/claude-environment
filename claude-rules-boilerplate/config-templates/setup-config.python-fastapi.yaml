# Claude Code Boilerplate — Python 3.12 + FastAPI (Full-Featured)
# Run: ./setup.sh --config setup-config.python-fastapi.yaml
#
# FastAPI leverages Pydantic for data contracts and type safety at runtime.
# No native_build: runs on CPython. Consider uvicorn for async performance.

# ═══════════════════════════════════════════════════
# SECTION 1: PROJECT IDENTITY
# ═══════════════════════════════════════════════════
project:
  name: "my-fastapi-service"
  purpose: "Describe your service purpose here"

# ═══════════════════════════════════════════════════
# SECTION 2: ARCHITECTURE
# ═══════════════════════════════════════════════════
architecture:
  style: microservice
  domain_driven: true          # Python supports DDD via modules and dataclasses
  event_driven: true

# ═══════════════════════════════════════════════════
# SECTION 3: INTERFACES
# ═══════════════════════════════════════════════════
interfaces:
  - type: rest
    spec: openapi
  - type: websocket
  - type: event-consumer
    broker: kafka
  - type: event-producer
    broker: kafka

# ═══════════════════════════════════════════════════
# SECTION 4: LANGUAGE
# ═══════════════════════════════════════════════════
language:
  name: python
  version: "3.12"

# ═══════════════════════════════════════════════════
# SECTION 5: FRAMEWORK
# ═══════════════════════════════════════════════════
framework:
  name: fastapi
  version: ""
  build_tool: pip
  native_build: false          # Interpreted — no native compilation

# ═══════════════════════════════════════════════════
# SECTION 6: DATA
# ═══════════════════════════════════════════════════
data:
  database:
    type: postgresql
    version: "17"
    migration: alembic

  cache:
    type: redis
    version: "7.4"

  message_broker:
    type: kafka
    version: "3.7"

# ═══════════════════════════════════════════════════
# SECTION 7: SECURITY
# ═══════════════════════════════════════════════════
security:
  compliance:
    - lgpd
  encryption:
    at_rest: true
    key_management: vault
  pentest_readiness: true

# ═══════════════════════════════════════════════════
# SECTION 8: CLOUD PROVIDER
# ═══════════════════════════════════════════════════
cloud:
  provider: aws

# ═══════════════════════════════════════════════════
# SECTION 9: INFRASTRUCTURE
# ═══════════════════════════════════════════════════
infrastructure:
  container: docker
  orchestrator: kubernetes
  templating: helm
  iac: terraform
  registry: ecr
  api_gateway: kong
  service_mesh: none           # Less common in Python ecosystems

# ═══════════════════════════════════════════════════
# SECTION 10: OBSERVABILITY
# ═══════════════════════════════════════════════════
observability:
  standard: opentelemetry
  backend: grafana-stack

# ═══════════════════════════════════════════════════
# SECTION 11: TESTING
# ═══════════════════════════════════════════════════
testing:
  smoke_tests: true
  performance_tests: true
  contract_tests: true         # Pact-Python is available and functional
  chaos_tests: false           # Less common in Python ecosystems

# ═══════════════════════════════════════════════════
# SECTION 12: DOMAIN TEMPLATE
# ═══════════════════════════════════════════════════
domain:
  template: none

# ═══════════════════════════════════════════════════
# SECTION 13: CONVENTIONS
# ═══════════════════════════════════════════════════
conventions:
  code_language: en
  commit_language: en
  documentation_language: pt-br
  git_scopes:
    - { scope: "domain", area: "Core domain logic" }
    - { scope: "infra", area: "Infrastructure and adapters" }
    - { scope: "api", area: "REST/WebSocket API layer" }
    - { scope: "events", area: "Event producers and consumers" }
    - { scope: "config", area: "Configuration and settings" }

# ═══════════════════════════════════════════════════
# SECTION 14: SKILLS / AGENTS / HOOKS / SETTINGS
# ═══════════════════════════════════════════════════
skills:
  override: auto
agents:
  override: auto
  adaptive_model:
    junior: "haiku"
    mid: "sonnet"
    senior: "opus"
hooks:
  post_compile: false          # Interpreted — no compilation step
settings:
  auto_generate: true
